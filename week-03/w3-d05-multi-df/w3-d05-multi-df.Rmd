---
title: "Working with multiple data frames"
subtitle: "<br><br> Introduction to Data Science"
author: "[introds.org](https://introds.org/)"
date: "<br> Dr. Mine Ã‡etinkaya-Rundel"
output:
  xaringan::moon_reader:
    css: ["../../xaringan-themer.css", "../../slides.css"]
    lib_dir: libs
    nature:
      ratio: "16:9"
      highlightLines: true
      highlightStyle: solarized-light
      countIncrementalSlides: false
---

```{r child = "../../setup.Rmd"}
```

```{r packages, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(knitr)
options(
  dplyr.print_min = 10, 
  dplyr.print_max = 10
  )
```

class: middle

.hand[You...]

.huge[.light-blue[have]] .hand[multiple data frames]

.huge[.pink[want]] .hand[to bring them together]

---

## Data: Women in science 

Information on 10 women in science who changed the world

.small[
```{r echo=FALSE, message=FALSE}
professions <- read_csv("data/professions.csv")
professions %>% select(name) %>% kable()
```
]


.footnote[
Source: [Discover Magazine](https://www.discovermagazine.com/the-sciences/meet-10-women-in-science-who-changed-the-world)
]

---

## Inputs

.panelset[

.panel[.panel-name[professions]
```{r message = FALSE}
professions <- read_csv("data/professions.csv")
professions
```
]

.panel[.panel-name[dates]
```{r message = FALSE}
dates <- read_csv("data/dates.csv")
dates
```
]

.panel[.panel-name[works]
```{r message = FALSE}
works <- read_csv("data/works.csv")
works
```
]

]

---

## Desired output

```{r echo=FALSE}
professions %>%
  left_join(dates) %>%
  left_join(works)
```

---

## Inputs, reminder

.pull-left[
```{r}
names(professions)
names(dates)
names(works)
```
]
.pull-right[
```{r}
nrow(professions)
nrow(dates)
nrow(works)
```
]

---

## Joining data frames

```
something_join(x, y)
```

- `left_join()`: all rows from x
- `right_join()`: all rows from y
- `full_join()`: all rows from both x and y
- `semi_join()`: all rows from x where there are matching values in y, keeping just columns from x
- `inner_join()`: all rows from x where there are matching values in y, return 
all combination of multiple matches in the case of multiple matches
- `anti_join()`: return all rows from x where there are not matching values in y, never duplicate rows of x
- ...
 
---

## Setup

For the next few slides...

.pull-left[
```{r echo=FALSE}
x <- tibble(value = c(1, 2, 3))
```
```{r}
x
```
]
.pull-right[
```{r echo=FALSE}
y <- tibble(value = c(1, 2, 4))
```
```{r}
y
```
]

---

## `left_join()`

.pull-left[
```{r}
left_join(x, y)
```
]
.pull-right[
```{r echo=FALSE, out.width="80%"}
include_graphics("img/left-join.gif")
```
]

---

## `left_join()`

```{r}
left_join(professions, dates)
```

---

## `right_join()`

.pull-left[
```{r}
right_join(x, y)
```
]
.pull-right[
```{r echo=FALSE, out.width="80%"}
include_graphics("img/right-join.gif")
```
]

---

## `right_join()`


```{r}
right_join(professions, dates)
```

---

## `full_join()`

.pull-left[
```{r}
full_join(x, y)
```
]
.pull-right[
```{r echo=FALSE, out.width="80%"}
include_graphics("img/full-join.gif")
```
]

---

## `full_join()`

```{r}
right_join(dates, works)
```

---

## `inner_join()`

.pull-left[
```{r}
inner_join(x, y)
```
]
.pull-right[
```{r echo=FALSE, out.width="80%"}
include_graphics("img/inner-join.gif")
```
]

---

## `inner_join()`

```{r}
inner_join(dates, works)
```

---

## `semi_join()`

.pull-left[
```{r}
semi_join(x, y)
```
]
.pull-right[
```{r echo=FALSE, out.width="80%"}
include_graphics("img/semi-join.gif")
```
]

---

## `semi_join()`

```{r}
semi_join(dates, works)
```

---

## `anti_join()`

.pull-left[
```{r}
anti_join(x, y)
```
]
.pull-right[
```{r echo=FALSE, out.width="80%"}
include_graphics("img/anti-join.gif")
```
]

---

## `anti_join()`

```{r}
anti_join(dates, works)
```

---

## Putting it altogether

```{r echo=FALSE}
professions %>%
  left_join(dates) %>%
  left_join(works)
```
